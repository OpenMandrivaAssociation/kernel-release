--- linux-4.12/arch/x86/entry/common.c.0250~	2017-07-03 01:07:02.000000000 +0200
+++ linux-4.12/arch/x86/entry/common.c	2017-08-30 15:49:01.897576969 +0200
@@ -178,7 +178,7 @@ static void exit_to_usermode_loop(struct
 }
 
 /* Called with IRQs disabled. */
-__visible inline void prepare_exit_to_usermode(struct pt_regs *regs)
+__visible extern inline void prepare_exit_to_usermode(struct pt_regs *regs)
 {
 	struct thread_info *ti = current_thread_info();
 	u32 cached_flags;
@@ -241,7 +241,7 @@ static void syscall_slow_exit_work(struc
  * Called with IRQs on and fully valid regs.  Returns with IRQs off in a
  * state such that we can immediately switch to user mode.
  */
-__visible inline void syscall_return_slowpath(struct pt_regs *regs)
+__visible extern inline void syscall_return_slowpath(struct pt_regs *regs)
 {
 	struct thread_info *ti = current_thread_info();
 	u32 cached_flags = READ_ONCE(ti->flags);
--- linux-4.12/drivers/staging/rtl8192u/Makefile.0250~	2017-07-03 01:07:02.000000000 +0200
+++ linux-4.12/drivers/staging/rtl8192u/Makefile	2017-08-30 15:49:01.896576971 +0200
@@ -1,6 +1,6 @@
 NIC_SELECT = RTL8192U
 
-ccflags-y := -std=gnu89
+ccflags-y := -std=gnu11
 ccflags-y += -O2
 
 ccflags-y += -DCONFIG_FORCE_HARD_FLOAT=y
--- linux-4.12/drivers/staging/rtl8723bs/include/ieee80211.h.0250~	2017-08-30 15:49:01.897576969 +0200
+++ linux-4.12/drivers/staging/rtl8723bs/include/ieee80211.h	2017-08-30 15:50:20.456401817 +0200
@@ -1008,18 +1008,18 @@ enum ieee80211_state {
 #define IP_FMT "%d.%d.%d.%d"
 #define IP_ARG(x) ((u8 *)(x))[0], ((u8 *)(x))[1], ((u8 *)(x))[2], ((u8 *)(x))[3]
 
-extern __inline int is_multicast_mac_addr(const u8 *addr)
+static inline int is_multicast_mac_addr(const u8 *addr)
 {
         return ((addr[0] != 0xff) && (0x01 & addr[0]));
 }
 
-extern __inline int is_broadcast_mac_addr(const u8 *addr)
+static inline int is_broadcast_mac_addr(const u8 *addr)
 {
 	return ((addr[0] == 0xff) && (addr[1] == 0xff) && (addr[2] == 0xff) &&   \
 		(addr[3] == 0xff) && (addr[4] == 0xff) && (addr[5] == 0xff));
 }
 
-extern __inline int is_zero_mac_addr(const u8 *addr)
+static inline int is_zero_mac_addr(const u8 *addr)
 {
 	return ((addr[0] == 0x00) && (addr[1] == 0x00) && (addr[2] == 0x00) &&   \
 		(addr[3] == 0x00) && (addr[4] == 0x00) && (addr[5] == 0x00));
--- linux-4.12/lib/decompress_unlzo.c.0250~	2017-07-03 01:07:02.000000000 +0200
+++ linux-4.12/lib/decompress_unlzo.c	2017-08-30 15:49:01.897576969 +0200
@@ -52,7 +52,7 @@ static const unsigned char lzop_magic[]
 #define HEADER_SIZE_MIN       (9 + 7     + 4 + 8     + 1       + 4)
 #define HEADER_SIZE_MAX       (9 + 7 + 1 + 8 + 8 + 4 + 1 + 255 + 4)
 
-STATIC inline long INIT parse_header(u8 *input, long *skip, long in_len)
+static inline long INIT parse_header(u8 *input, long *skip, long in_len)
 {
 	int l;
 	u8 *parse = input;
--- linux-4.12/Makefile.0250~	2017-08-30 15:49:01.896576971 +0200
+++ linux-4.12/Makefile	2017-08-30 15:49:43.095485261 +0200
@@ -303,7 +303,7 @@ CONFIG_SHELL := $(shell if [ -x "$$BASH"
 
 HOSTCC       = gcc
 HOSTCXX      = g++
-HOSTCFLAGS   = -Wall -Wmissing-prototypes -Wstrict-prototypes -O2 -fomit-frame-pointer -std=gnu89
+HOSTCFLAGS   = -Wall -Wmissing-prototypes -Wstrict-prototypes -O2 -fomit-frame-pointer -std=gnu11
 HOSTCXXFLAGS = -O2
 
 ifeq ($(shell $(HOSTCC) -v 2>&1 | grep -c "clang version"), 1)
@@ -401,7 +401,7 @@ KBUILD_CFLAGS   := -Wall -Wundef -Wstric
 		   -fno-strict-aliasing -fno-common \
 		   -Werror-implicit-function-declaration \
 		   -Wno-format-security \
-		   -std=gnu89 $(call cc-option,-fno-PIE)
+		   -std=gnu11 $(call cc-option,-fno-PIE)
 
 
 KBUILD_AFLAGS_KERNEL :=
--- linux-4.12/tools/testing/selftests/sync/Makefile.0250~	2017-07-03 01:07:02.000000000 +0200
+++ linux-4.12/tools/testing/selftests/sync/Makefile	2017-08-30 15:49:01.897576969 +0200
@@ -1,4 +1,4 @@
-CFLAGS += -O2 -g -std=gnu89 -pthread -Wall -Wextra
+CFLAGS += -O2 -g -std=gnu11 -pthread -Wall -Wextra
 CFLAGS += -I../../../../usr/include/
 LDFLAGS += -pthread
 
